#!/bin/bash

src_dir="srcs"
bonus_dir="srcs_bonus"

# V√©rifie que les dossiers existent
if [ ! -d "$src_dir" ] || [ ! -d "$bonus_dir" ]; then
    echo "‚ùå Les dossiers '$src_dir' ou '$bonus_dir' n'existent pas."
    exit 1
fi

# Parcours r√©cursif des fichiers .c dans srcs (hors *_bonus.c)
find "$src_dir" -type f -name "*.c" ! -name "*_bonus.c" | while read -r file; do
    # Enl√®ve le dossier de base pour retrouver le chemin relatif
    relative_path="${file#$src_dir/}"
    
    # Cr√©e le chemin correspondant dans srcs_bonus avec _bonus.c
    filename_no_ext="${relative_path%.c}"
    bonus_file="$bonus_dir/${filename_no_ext}_bonus.c"

    if [ -f "$bonus_file" ]; then
        echo "üîç Comparaison entre :"
        echo "  ‚û§ $file"
        echo "  ‚û§ $bonus_file"
        echo "---------------------------"
        diff -u "$file" "$bonus_file" || echo "‚ö†Ô∏è  Fichiers diff√©rents"
        echo ""
    else
        echo "‚ùå Pas de fichier bonus pour $relative_path"
        echo ""
    fi
done

